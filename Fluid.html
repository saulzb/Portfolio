<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Saul Zidulka-Bejcek | Fluid</title>

<link href="https://fonts.googleapis.com/css2?family=Michroma&display=swap" rel="stylesheet">

<style>
html, body {
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  font-family:'Michroma',sans-serif;
  background:#0b0b0f;
  color:#eee;
  scroll-behavior:smooth;
  overflow-x:hidden;
  scroll-snap-type:y mandatory;
}
body::-webkit-scrollbar { width:0; height:0; }
body { scrollbar-width:none; }

section {
  width:100%;
  height:100vh;
  box-sizing:border-box;
  position:relative;
  display:flex;
  flex-direction:column;
  scroll-snap-align:start;
  overflow:hidden;
  opacity:0;
  transition:opacity 0.9s ease;
}
section.visible { opacity:1; }

/* ---------------- CATEGORY SECTION ---------------- */
.category-section {
  padding-top:120px;
  align-items:flex-start;
}

/* ---------------- RETRO NEON OS HEADER ---------------- */
.neon-title {
  margin:0 0 50px 40px;
  padding:8px 18px;

  display:inline-block;

  font-size:0.85rem;
  letter-spacing:0.14em;
  text-transform:uppercase;

  color:#7ffcff;
  background:#0e1118;

  /* old Windows bevel logic */
  border-top:1px solid #2dfcff;
  border-left:1px solid #2dfcff;
  border-right:1px solid #0a2c33;
  border-bottom:1px solid #0a2c33;

  /* neon phosphor edge */
  box-shadow:
    inset 0 0 0 1px rgba(127,252,255,0.15),
    0 0 12px rgba(45,252,255,0.25);

  image-rendering:pixelated;
}

/* faint scanline texture */
.neon-title::after {
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background:
    repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,0.06),
      rgba(255,255,255,0.06) 1px,
      transparent 1px,
      transparent 3px
    );
  opacity:0.15;
}

/* ---------------- PHOTO GRID ---------------- */
.category-row {
  display:flex;
  flex-wrap:wrap;
  justify-content:flex-start;
  gap:40px;
  margin-left:40px;
  margin-bottom:40px;
}

.category-row img {
  width:180px;
  height:180px;
  object-fit:cover;
  border-radius:6px;
  cursor:pointer;

  background:#111;
  box-shadow:
    0 0 0 1px rgba(255,255,255,0.06),
    0 10px 25px rgba(0,0,0,0.6);

  position:relative;
}

/* subtle neon reflection */
.category-row img::after {
  content:"";
  position:absolute;
  inset:0;
  border-radius:6px;
  pointer-events:none;
  background:linear-gradient(
    120deg,
    rgba(0,255,255,0.25),
    rgba(255,0,255,0.15),
    transparent 60%
  );
  opacity:0.25;
}

/* photo numbering */
.photo-number {
  display:block;
  margin-top:6px;
  font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue",sans-serif;
  font-size:0.75rem;
  color:#8fa9b5;
  text-align:center;
}

/* ---------------- LIGHTBOX ---------------- */
#lightboxOverlay {
  position:fixed;
  inset:0;
  background:rgba(5,6,10,0.95);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:9999;
}
#lightboxOverlay img {
  max-width:90vw;
  max-height:90vh;
  border-radius:4px;
}
.lightbox-arrow {
  position:fixed;
  top:50%;
  transform:translateY(-50%);
  font-size:48px;
  background:none;
  border:none;
  color:#7ffcff;
  cursor:pointer;
}
#lightbox-prev { left:30px; }
#lightbox-next { right:30px; }
#lightbox-close {
  position:fixed;
  top:20px;
  right:30px;
  font-size:42px;
  background:none;
  border:none;
  color:#7ffcff;
  cursor:pointer;
}

/* Back arrow */
.back-arrow {
  position:absolute;
  top:20px;
  left:30px;
  font-size:28px;
  cursor:pointer;
  color:#7ffcff;
  user-select:none;
  transform:rotate(270deg);
}
</style>
</head>

<body>

<div class="back-arrow" onclick="window.location.href='index.html'">^</div>

<div id="photoSections"></div>

<div id="lightboxOverlay">
  <button id="lightbox-close">×</button>
  <button id="lightbox-prev" class="lightbox-arrow">❮</button>
  <img id="lightbox-img" src="">
  <button id="lightbox-next" class="lightbox-arrow">❯</button>
</div>

<script>
const SPACE_ID = '5w319pzc4eiq';
const ACCESS_TOKEN = 'l_S14vNHPLKqDVzZDxMSlO3g3AhMne9mAvyC74dyetg';

const CATEGORY_FILTER = "TI";   // Contentful category
const DISPLAY_NAME = "Fluid";  // Visible title

async function fetchPhotos(){
  const res = await fetch(
    `https://cdn.contentful.com/spaces/${SPACE_ID}/entries?content_type=photo&access_token=${ACCESS_TOKEN}&include=1`
  );
  const data = await res.json();

  const assets = {};
  data.includes?.Asset?.forEach(a => {
    assets[a.sys.id] = a.fields.file.url;
  });

  const photos = data.items
    .map(i => ({
      photo: `https:${assets[i.fields.photo.sys.id]}`,
      thumbnail: i.fields.thumbnail
        ? `https:${assets[i.fields.thumbnail.sys.id]}`
        : "",
      category: i.fields.category
    }))
    .filter(p => p.category === CATEGORY_FILTER);

  displayPhotos(photos);
}

function displayPhotos(photos){
  const container = document.getElementById("photoSections");

  const section = document.createElement("section");
  section.className = "category-section";
  section.innerHTML = `<div class="neon-title">${DISPLAY_NAME}</div>`;

  let counter = 1;
  const row = document.createElement("div");
  row.className = "category-row";

  photos.forEach(p => {
    const img = document.createElement("img");
    img.src = p.thumbnail || p.photo;
    img.dataset.full = p.photo;

    const number = document.createElement("span");
    number.className = "photo-number";
    number.textContent = "IMG_" + String(counter).padStart(2,"0");
    counter++;

    const wrap = document.createElement("div");
    wrap.style.display = "flex";
    wrap.style.flexDirection = "column";
    wrap.style.alignItems = "center";
    wrap.appendChild(img);
    wrap.appendChild(number);

    row.appendChild(wrap);
  });

  section.appendChild(row);
  container.appendChild(section);
  observer.observe(section);
  enableLightbox();
}

const observer = new IntersectionObserver(entries=>{
  entries.forEach(e=>{
    if(e.isIntersecting) e.target.classList.add("visible");
  });
},{threshold:0.3});

function enableLightbox(){
  let imgs=[], idx=0;

  document.querySelectorAll(".category-row img").forEach(img=>{
    img.onclick=()=>{
      const rowImgs=[...img.parentElement.parentElement.querySelectorAll("img")];
      imgs=rowImgs.map(i=>i.dataset.full);
      idx=rowImgs.indexOf(img);
      open();
    };
  });

  function open(){
    document.body.style.overflow="hidden";
    document.getElementById("lightbox-img").src=imgs[idx];
    document.getElementById("lightboxOverlay").style.display="flex";
  }
  function close(){
    document.body.style.overflow="";
    document.getElementById("lightboxOverlay").style.display="none";
  }
  function next(){ idx=(idx+1)%imgs.length; open(); }
  function prev(){ idx=(idx-1+imgs.length)%imgs.length; open(); }

  document.getElementById("lightbox-close").onclick=close;
  document.getElementById("lightbox-next").onclick=next;
  document.getElementById("lightbox-prev").onclick=prev;
}

fetchPhotos();
</script>

</body>
</html>
