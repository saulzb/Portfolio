<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Saul Zidulka-Bejcek | channelORANGE</title>

<link href="https://fonts.googleapis.com/css2?family=Michroma&display=swap" rel="stylesheet">

<style>
/* ---------------- BASE ---------------- */
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  color: #eaeaea;
  background: #0a0a0c;
  font-family: 'Michroma', sans-serif;
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(10, 10, 12, 0.65);
  pointer-events: none;
  z-index: 1;
}

/* ---------------- SECTION ---------------- */
section {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 60px;
  position: relative;
  z-index: 2;
}

/* ---------------- BACK ---------------- */
.back-home {
  position: absolute;
  top: 30px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 0.75rem;
  color: rgba(204,204,204,0.5);
  text-decoration: none;
  z-index: 10;
}

/* ---------------- PRISM ---------------- */
.prism {
  width: 280px;
  height: 68px;
  position: relative;
  overflow: hidden;
  clip-path: polygon(8% 0%,100% 0%,100% 100%,8% 100%,0% 50%);
  background: linear-gradient(135deg,rgba(255,255,255,0.16),rgba(255,255,255,0.04));
  border: 1px solid rgba(255,255,255,0.25);
}

/* ---------------- GRID ---------------- */
.category-row {
  display: flex;
  flex-wrap: wrap;
  gap: 40px;
  justify-content: center;
}

#photoSections {
  padding-bottom: 80px;
}

.category-row img {
  width: 180px;
  height: 180px;
  object-fit: cover;
  cursor: pointer;
  border-radius: 6px;
  filter: blur(12px);
  opacity: 0;
  transition: opacity 0.5s ease, filter 0.3s ease;
}

.category-row img.loaded {
  filter: blur(0);
  opacity: 1;
}

/* ---------------- LIGHTBOX ---------------- */
.lightbox {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.92);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 999;
}

.lightbox.show {
  display: flex;
}

.lightbox img {
  max-width: 90vw;     /* ðŸ”‘ critical */
  max-height: 90vh;    /* ðŸ”‘ critical */
  object-fit: contain;
  cursor: zoom-out;
}

/* ---------------- MOBILE ---------------- */
@media (max-width:768px) {

  section {
    min-height: auto;
    justify-content: flex-start;
    padding-top: 120px;
    padding-bottom: 0;
  }

  #photoSections {
    padding-bottom: 60px;
  }

  .category-row {
    gap: 28px;
  }
}
</style>
</head>

<body>

<section>
  <a href="index.html#folders" class="back-home">Back to home</a>

  <div class="prism"></div>

  <div id="photoSections"></div>
</section>

<div class="lightbox" id="lightbox">
  <img id="lightbox-img">
</div>

<script>
const SPACE_ID = '5w319pzc4eiq';
const ACCESS_TOKEN = 'l_S14vNHPLKqDVzZDxMSlO3g3AhMne9mAvyC74dyetg';
const CATEGORY_NAME = "channelORANGE";

let gallery = [];

async function fetchPhotos(){
  const res = await fetch(
    `https://cdn.contentful.com/spaces/${SPACE_ID}/entries?content_type=photo&access_token=${ACCESS_TOKEN}&include=1`
  );
  const data = await res.json();

  const assets = {};
  data.includes.Asset.forEach(a => assets[a.sys.id] = a.fields.file.url);

  gallery = data.items
    .filter(i => i.fields.category === CATEGORY_NAME)
    .map(i => `https:${assets[i.fields.photo.sys.id]}`);

  renderPhotos();
}

function renderPhotos(){
  const row = document.createElement("div");
  row.className = "category-row";

  gallery.forEach((src,i)=>{
    const img = document.createElement("img");
    img.src = `${src}?w=40&q=10`;
    img.loading = "lazy";

    const hi = new Image();
    hi.src = `${src}?w=360&q=85`;
    hi.onload = () => {
      img.src = hi.src;
      img.classList.add("loaded");
    };

    img.onclick = () => openLightbox(src);
    row.appendChild(img);
  });

  document.getElementById("photoSections").appendChild(row);
}

const lightbox = document.getElementById("lightbox");
const lightboxImg = document.getElementById("lightbox-img");

function openLightbox(src){
  lightboxImg.src = src;
  lightbox.classList.add("show");
}

lightbox.addEventListener("click", () => {
  lightbox.classList.remove("show");
  lightboxImg.src = "";
});

fetchPhotos();
</script>

</body>
</html>
