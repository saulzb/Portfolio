<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Saul Zidulka-Bejcek</title>
<link href="https://fonts.googleapis.com/css2?family=Archivo+Expanded&display=swap" rel="stylesheet">
<style>
html, body {
  margin:0; padding:0;
  width:100%; height:100%;
  font-family:'Archivo Expanded', sans-serif;
  background:#111;
  color:#eee;
  scroll-behavior: smooth;
  scroll-snap-type: y mandatory;
  overflow-x: hidden;
}

/* Sections */
section {
  width:100%;
  height:100vh;
  scroll-snap-align: start;
  position: relative;
  display: flex;
  flex-direction: column;
  box-sizing: border-box;
  padding:20px;
}

/* HERO */
#hero { 
  background:url('SAULZIDULKA-BEJCEK.png') center/cover no-repeat; 
  background-size:cover;
}

.arrow {
  color:#fff;
  font-size:1.5rem;
  display:flex;
  flex-direction:column;
  align-items:center;
  cursor:pointer;
  user-select:none;
  z-index:10;
  position:absolute;
}
.arrow span { font-size:0.8rem; margin-top:5px; }

.arrow-down { bottom:40px; left:50%; transform:translateX(-50%);} 
.arrow-back-up { top:40px; left:50%; transform:translateX(-50%);} 

@media(max-width:768px){
  #hero { background:url('SAULZIDLKABEJCEKMOBILE.jpg') center/cover no-repeat; background-size:cover; }
  .arrow-down { bottom:20px; }
}

/* PHOTOS SECTION */
#photos { background:#111; padding-top:40px; }

/* Featured category horizontal scroll */
.featured-section {
  height:100vh;
  scroll-snap-align: start;
  display:flex;
  flex-direction: column;
  overflow:hidden;
  position:relative;
  text-align:center;
  justify-content:center;
}

.featured-section h2 {
  margin-bottom:10px;
}

/* Horizontal rows container */
.featured-rows {
  position:relative;
  height:100%;
  overflow:hidden;
}

.featured-row {
  display:flex;
  position:absolute;
  top:0;
  left:0;
  height:50%; /* half of section */
}

.featured-row.second {
  top:50%;
}

/* Horizontal animation */
@keyframes scroll-right {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

.featured-row div {
  flex: 0 0 auto;
}

.featured-row img {
  height:100%;
  width:auto;
  display:block;
  object-fit:cover;
}

/* Other categories */
.category-section { 
  height:100vh;
  scroll-snap-align: start;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  text-align:center;
  padding-top:60px;
}

.category-section h2 { 
  margin-bottom:20px; 
  width:100%;
}

.category-grid { 
  width:100%;
  max-width:1200px;
  display:grid; 
  grid-template-columns: repeat(auto-fill,minmax(200px,1fr)); 
  justify-items:center; /* center each photo */
  gap:20px; 
  flex:1;
}

.category-item img { 
  width:100%; 
  max-width:260px;
  display:block; 
  border-radius:6px; 
}
</style>
</head>
<body>

<section id="hero">
  <div class="arrow arrow-down">↓<span>Photos</span></div>
</section>

<section id="photos">
  <div class="arrow arrow-back-up">↑<span>Hero</span></div>
  <div id="categories"></div>
</section>

<script>
// Arrows
const hero = document.getElementById('hero');
const photos = document.getElementById('photos');

hero.querySelector('.arrow-down').onclick = () => photos.scrollIntoView({behavior:'smooth'});
document.querySelector('.arrow-back-up').onclick = () => hero.scrollIntoView({behavior:'smooth'});

// Contentful
const SPACE_ID = '5w319pzc4eiq';
const ACCESS_TOKEN = 'l_S14vNHPLKqDVzZDxMSlO3g3AhMne9mAvyC74dyetg';
const ENVIRONMENT = 'master';

async function fetchPhotos(){
  const url = `https://cdn.contentful.com/spaces/${SPACE_ID}/environments/${ENVIRONMENT}/entries?content_type=photo&access_token=${ACCESS_TOKEN}&order=sys.createdAt&include=1`;
  const res = await fetch(url);
  if(!res.ok) return console.error('Contentful fetch failed', res.status);
  const data = await res.json();

  const assets = {};
  data.includes?.Asset?.forEach(a => assets[a.sys.id] = a.fields.file.url);

  displayPhotos(data.items.map(item => {
    const f = item.fields;
    return {
      title: f.title,
      photo: f.photo ? `https:${assets[f.photo.sys.id]}` : '',
      thumbnail: f.thumbnail ? `https:${assets[f.thumbnail.sys.id]}` : '',
      category: f.category || '',
      featured: f.featured || false
    };
  }));
}

function displayPhotos(photosData){
  const categoriesContainer = document.getElementById('categories');
  const allCategories = ["Featured","Double Exposures","Wildlife","Travel","Water","Light"];

  allCategories.forEach(cat=>{
    const items = cat==="Featured" 
      ? photosData.filter(p=>p.featured) 
      : photosData.filter(p=>p.category===cat);

    if(items.length===0) return;

    if(cat==="Featured"){
      const section = document.createElement('div');
      section.className='featured-section';

      const h2 = document.createElement('h2');
      h2.textContent = cat;
      section.appendChild(h2);

      const rowsContainer = document.createElement('div');
      rowsContainer.className='featured-rows';

      // Split items for two rows
      const mid = Math.ceil(items.length/2);
      const row1Items = items.slice(0, mid);
      const row2Items = items.slice(mid);

      // function to create scrolling row
      function createRow(rowItems, isSecond){
        const row = document.createElement('div');
        row.className = 'featured-row' + (isSecond ? ' second' : '');
        // duplicate for seamless scroll
        const allItems = [...rowItems, ...rowItems];
        allItems.forEach(p=>{
          const div = document.createElement('div');
          const img = document.createElement('img');
          img.src = p.thumbnail || p.photo;
          img.alt = p.title;
          div.appendChild(img);
          row.appendChild(div);
        });
        // Apply animation
        row.style.animation = `scroll-right ${10 + rowItems.length*2}s linear infinite`;
        return row;
      }

      rowsContainer.appendChild(createRow(row1Items, false));
      rowsContainer.appendChild(createRow(row2Items, true));
      section.appendChild(rowsContainer);

      categoriesContainer.appendChild(section);

    } else {
      const section = document.createElement('div');
      section.className='category-section';

      const h2 = document.createElement('h2');
      h2.textContent = cat;
      section.appendChild(h2);

      const grid = document.createElement('div');
      grid.className='category-grid';

      items.forEach(p=>{
        const div = document.createElement('div');
        div.className='category-item';

        const img = document.createElement('img');
        img.src = p.thumbnail || p.photo;
        img.alt = p.title;

        div.appendChild(img);
        grid.appendChild(div);
      });

      section.appendChild(grid);
      categoriesContainer.appendChild(section);
    }
  });
}

fetchPhotos();
</script>

</body>
</html>
