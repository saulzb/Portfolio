<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Saul Zidulka-Bejcek</title>
<link href="https://fonts.googleapis.com/css2?family=Archivo+Expanded&display=swap" rel="stylesheet">
<style>
html, body {
  margin:0; padding:0;
  width:100%; height:100%;
  font-family:'Archivo Expanded', sans-serif;
  background:#111;
  color:#eee;
  overflow:hidden;
}

/* Horizontal container for Hero, Music, Drawings */
#container {
  display:flex;
  width:300vw;
  height:100vh;
  scroll-snap-type: x mandatory;
  overflow-x: auto;
  scroll-behavior: smooth;
}
section {
  width:100vw;
  flex-shrink:0;
  height:100vh;
  display:flex;
  flex-direction:column;
  padding:20px;
  box-sizing:border-box;
  scroll-snap-align: start;
}

/* Sections */
#hero {
  background:url('SAULZIDULKA-BEJCEK.png') center/cover no-repeat;
  background-size:cover;
  position:relative;
}
#music { background:#222; position:relative;}
#drawings { background:#444; position:relative;}

/* Photos */
#photos {
  background:#111;
  min-height:100vh;
  overflow-y:auto;
  scroll-snap-type: y mandatory;
  scroll-behavior: smooth;
  padding:0;
  position:relative;
}
.category-section { scroll-snap-align:start; margin-bottom:0; }
.category-section h2 { font-size:1rem; margin:10px 20px; }
.category-grid {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
  grid-gap:10px;
  padding:0 20px 40px 20px;
}
.category-item {
  border-radius:8px;
  overflow:hidden;
  opacity:0;
  transform:translateY(20px);
  transition: opacity 0.6s ease, transform 0.6s ease;
}
.category-item.visible { opacity:1; transform:translateY(0); }
.category-item img { width:100%; max-height:80vh; object-fit:contain; display:block; transition:transform 0.3s; }

/* Arrows */
.arrow {
  color:#fff;
  font-size:1.5rem;
  display:flex;
  flex-direction:column;
  align-items:center;
  cursor:pointer;
  user-select:none;
  z-index:10;
}
.arrow span { font-size:0.8rem; margin-top:5px; }

/* Hero arrows */
.arrow-right { position:absolute; top:50%; right:20px; transform:translateY(-50%);}
.arrow-left  { position:absolute; top:50%; left:20px; transform:translateY(-50%);}
.arrow-down  { position:absolute; bottom:40px; left:50%; transform:translateX(-50%); }

/* Back arrows */
.arrow-back { position:absolute; top:20px; left:50%; transform:translateX(-50%); z-index:20; display:none; }

/* Photos back arrow fixed */
.arrow-back-photos { position:fixed; top:20px; left:50%; transform:translateX(-50%); display:none; z-index:20; }

/* Mobile */
@media(max-width:768px){
  #hero { background:url('SAULZIDLKABEJCEKMOBILE.jpg') center/cover no-repeat; background-size:cover;}
  .arrow-down { bottom:20px; }
  .category-grid { grid-template-columns:repeat(auto-fit,minmax(140px,1fr)); }
  .category-item img { max-height:150px; }
}
</style>
</head>
<body>

<!-- Horizontal scroll container -->
<div id="container">
  <section id="hero">
    <div class="arrow arrow-right">→<span>Music</span></div>
    <div class="arrow arrow-left">←<span>Drawings</span></div>
    <div class="arrow arrow-down">↓<span>Photos</span></div>
  </section>

  <section id="music">
    <h2>MUSIC</h2>
    <div class="arrow arrow-back">↑<span>Back</span></div>
  </section>

  <section id="drawings">
    <h2>DRAWINGS</h2>
    <div class="arrow arrow-back">↑<span>Back</span></div>
  </section>
</div>

<section id="photos">
  <div class="arrow arrow-back-photos">↑<span>Back</span></div>
  <div id="categories"></div>
</section>

<script>
// ---------- HERO HORIZONTAL ARROWS ----------
const containerEl = document.getElementById('container');
const hero = document.getElementById('hero');
const music = document.getElementById('music');
const drawings = document.getElementById('drawings');
const photos = document.getElementById('photos');

const arrowRight = hero.querySelector('.arrow-right');
const arrowLeft = hero.querySelector('.arrow-left');
const arrowDown = hero.querySelector('.arrow-down');
const arrowBackMusic = music.querySelector('.arrow-back');
const arrowBackDrawings = drawings.querySelector('.arrow-back');
const arrowBackPhotos = document.querySelector('.arrow-back-photos');

arrowRight.addEventListener('click', ()=>{ containerEl.scrollTo({left:window.innerWidth, behavior:'smooth'}); });
arrowLeft.addEventListener('click', ()=>{ containerEl.scrollTo({left:-window.innerWidth, behavior:'smooth'}); });

// Scroll down directly to first featured photo
arrowDown.addEventListener('click', ()=>{
  const firstSection = document.querySelector('#categories .category-section');
  if(firstSection){ firstSection.scrollIntoView({behavior:'smooth'}); arrowBackPhotos.style.display='flex'; }
});

// Back arrows
arrowBackMusic.addEventListener('click', ()=>{ containerEl.scrollTo({left:0, behavior:'smooth'}); });
arrowBackDrawings.addEventListener('click', ()=>{ containerEl.scrollTo({left:0, behavior:'smooth'}); });
arrowBackPhotos.addEventListener('click', ()=>{
  containerEl.scrollTo({left:0, behavior:'smooth'});
  window.scrollTo({top:0, behavior:'smooth'});
  arrowBackPhotos.style.display='none';
});

// Show back arrow only at top of photos
photos.addEventListener('scroll', ()=>{
  if(photos.scrollTop < 50) arrowBackPhotos.style.display='flex';
  else arrowBackPhotos.style.display='none';
});

// ---------- CONTENTFUL LOAD ----------
const SPACE_ID = '5w319pzc4eiq';
const ACCESS_TOKEN = 'l_S14vNHPLKqDVzZDxMSlO3g3AhMne9mAvyC74dyetg';
const ENVIRONMENT = 'master';

async function fetchPhotos(){
  const url = `https://cdn.contentful.com/spaces/${SPACE_ID}/environments/${ENVIRONMENT}/entries?content_type=photo&access_token=${ACCESS_TOKEN}&order=sys.createdAt&include=1`;
  const res = await fetch(url);
  if(!res.ok){ console.error('Contentful fetch failed', res.status); return; }
  const data = await res.json();

  const assets={};
  data.includes?.Asset?.forEach(a=>assets[a.sys.id]=a.fields.file.url);

  const photosData = data.items.map(item=>{
    const f=item.fields;
    return {
      title: f.title,
      photo: f.photo?`https:${assets[f.photo.sys.id]}`:'',
      thumbnail: f.thumbnail?`https:${assets[f.thumbnail.sys.id]}`:'',
      category: f.category || '',
      featured: f.featured || false
    };
  });
  displayPhotos(photosData);
}

function displayPhotos(photosData){
  const categoriesContainer = document.getElementById('categories');
  const allCategories = ["Featured","Double Exposures","Wildlife","Travel","Water","Light"];
  allCategories.forEach(cat=>{
    const items = (cat==="Featured")?photosData.filter(p=>p.featured):photosData.filter(p=>p.category===cat);
    if(items.length===0) return;
    const section = document.createElement('div'); section.className='category-section';
    const h2 = document.createElement('h2'); h2.textContent=cat; section.appendChild(h2);
    const grid = document.createElement('div'); grid.className='category-grid';
    items.forEach(p=>{
      const div=document.createElement('div'); div.className='category-item';
      const img=document.createElement('img'); img.src=p.thumbnail||p.photo; img.alt=p.title; div.appendChild(img); grid.appendChild(div);
    });
    section.appendChild(grid); categoriesContainer.appendChild(section);
  });

  // Fade-in observer
  const categoryItems = document.querySelectorAll('.category-item');
  const observerOptions = { threshold:0.1 };
  categoryItems.forEach(item=>{
    const observer = new IntersectionObserver(entries=>{
      entries.forEach(entry=>{
        if(entry.isIntersecting){ entry.target.classList.add('visible'); observer.unobserve(entry.target); }
      });
    }, observerOptions);
    observer.observe(item);
  });
}

fetchPhotos();
</script>
</body>
</html>
