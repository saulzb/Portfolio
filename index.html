<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Saul Zidulka-Bejcek</title>
<link href="https://fonts.googleapis.com/css2?family=Archivo+Expanded&display=swap" rel="stylesheet">
<style>
html, body {
  margin:0; padding:0;
  width:100%; height:100%;
  font-family:'Archivo Expanded', sans-serif;
  background:#111;
  color:#eee;
  overflow-x:hidden; /* allow vertical scrolling */
}

/* Horizontal container for Hero, Music, Drawings */
#container {
  display:flex;
  width:300vw;
  height:100vh;
  transition: transform 0.8s ease;
}

section {
  width:100vw;
  flex-shrink:0;
  height:100%;
  display:flex;
  flex-direction:column;
  padding:20px;
  box-sizing:border-box;
}

/* Sections positions */
#hero {
  background:url('SAULZIDULKA-BEJCEK.png') center/cover no-repeat;
  background-size:cover;
  position:relative;
}
#music { background:#222; }
#drawings { background:#444; }

/* Photos section (separate, scrollable) */
#photos {
  background:#111;
  min-height:100vh;
  overflow-y: scroll;
  scroll-behavior:smooth;
  padding:20px;
  scroll-snap-type: y mandatory; /* snap vertically */
}

/* Category section */
.category-section {
  scroll-snap-align: start;
  margin-bottom:30px;
}
.category-section h2 {
  font-size:1rem;
  margin-bottom:10px;
  text-align:left;
}

/* Category grid */
.category-grid {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
  grid-gap:10px;
}
.category-item {
  border-radius:8px;
  overflow:hidden;
  opacity:0;
  transform: translateY(20px);
  transition: opacity 0.6s ease, transform 0.6s ease;
}
.category-item.visible {
  opacity:1;
  transform: translateY(0);
}
.category-item img {
  width:100%;
  max-height:80vh;
  object-fit:contain;
  display:block;
  background:none;
  transition: transform 0.3s ease; /* for parallax */
}

/* Arrows */
.arrow {
  position:absolute;
  color:#fff;
  font-size:1.5rem;
  display:flex;
  flex-direction:column;
  align-items:center;
  cursor:pointer;
  user-select:none;
  z-index:10;
}
.arrow span { font-size:0.8rem; margin-top:5px; }

/* Hero arrows */
.arrow-right { top:50%; right:20px; transform:translateY(-50%);}
.arrow-left  { top:50%; left:20px; transform:translateY(-50%);}
.arrow-down  { bottom:40px; left:50%; transform:translateX(-50%);}

/* Branch arrows */
.arrow-back-left  { top:50%; left:20px; transform:translateY(-50%);} 
.arrow-back-right { top:50%; right:20px; transform:translateY(-50%);} 
.arrow-back-up    { top:20px; left:50%; transform:translateX(-50%);}   

/* Scroll indicator dots */
#photos .scroll-indicator {
  position: fixed;
  top:50%;
  right:20px;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  gap:10px;
  z-index:10;
}
#photos .scroll-indicator .dot {
  width:12px;
  height:12px;
  border-radius:50%;
  background:#666;
  cursor:pointer;
  transition: background 0.3s;
}
#photos .scroll-indicator .dot.active {
  background:#eee;
}

/* Mobile adjustments */
@media(max-width:768px){
  #hero { background:url('SAULZIDLKABEJCEKMOBILE.jpg') center/cover no-repeat; background-size:cover; }
  .arrow-down { bottom:20px; }
  .category-grid { grid-template-columns:repeat(auto-fit,minmax(140px,1fr)); }
  .category-item img { max-height:150px; }
}
</style>
</head>
<body>

<!-- Horizontal scroll container -->
<div id="container">
  <section id="hero">
    <div class="arrow arrow-right" data-dir="right">→<span>Music</span></div>
    <div class="arrow arrow-left" data-dir="left">←<span>Drawings</span></div>
    <div class="arrow arrow-down" data-dir="down">↓<span>Photos</span></div>
  </section>

  <section id="music">
    <h2>MUSIC</h2>
    <div class="arrow arrow-back-left" data-dir="hero">←<span>Back</span></div>
  </section>

  <section id="drawings">
    <h2>DRAWINGS</h2>
    <div class="arrow arrow-back-right" data-dir="hero">→<span>Back</span></div>
  </section>
</div>

<!-- Photos section (vertical scroll) -->
<section id="photos">
  <div class="arrow arrow-back-up" data-dir="hero">↑<span>Back</span></div>
  <div id="categories"></div>
  <div class="scroll-indicator"></div>
</section>

<script>
// ----- HORIZONTAL ARROWS -----
const containerEl = document.getElementById('container');
document.querySelectorAll('.arrow').forEach(a=>{
  a.addEventListener('click', ()=>{
    const dir = a.dataset.dir;
    if(dir==='right') containerEl.style.transform = 'translateX(-100vw)';
    if(dir==='left') containerEl.style.transform = 'translateX(100vw)';
    if(dir==='down') document.getElementById('photos').scrollIntoView({behavior:'smooth'});
    if(dir==='hero') window.scrollTo({top:0, behavior:'smooth'});
  });
});

// ----- CONTENTFUL DYNAMIC LOAD -----
const SPACE_ID = '5w319pzc4eiq';
const ACCESS_TOKEN = 'l_S14vNHPLKqDVzZDxMSlO3g3AhMne9mAvyC74dyetg';
const ENVIRONMENT = 'master';

async function fetchPhotos() {
  const url = `https://cdn.contentful.com/spaces/${SPACE_ID}/environments/${ENVIRONMENT}/entries?content_type=photo&access_token=${ACCESS_TOKEN}&order=sys.createdAt&include=1`;
  const res = await fetch(url);
  if(!res.ok){ console.error('Contentful fetch failed', res.status); return; }
  const data = await res.json();

  const assets = {};
  data.includes?.Asset?.forEach(a=>{
    assets[a.sys.id] = a.fields.file.url;
  });

  const photos = data.items.map(item => {
    const f = item.fields;
    return {
      title: f.title,
      photo: f.photo ? `https:${assets[f.photo.sys.id]}` : '',
      thumbnail: f.thumbnail ? `https:${assets[f.thumbnail.sys.id]}` : '',
      description: f.description || '',
      category: f.category || '',
      featured: f.featured || false
    };
  });

  displayPhotos(photos);
}

function displayPhotos(photos){
  const categoriesContainer = document.getElementById('categories');
  const indicatorContainer = document.querySelector('#photos .scroll-indicator');
  const allCategories = ["Featured","Double Exposures","Wildlife","Travel","Water","Light"];

  allCategories.forEach((cat,index)=>{
    let items;
    if(cat==="Featured"){
      items = photos.filter(p=>p.featured);
    } else {
      items = photos.filter(p=>p.category===cat);
    }
    if(items.length===0) return;

    const section = document.createElement('div');
    section.className = 'category-section';

    const h2 = document.createElement('h2');
    h2.textContent = cat;
    section.appendChild(h2);

    const grid = document.createElement('div');
    grid.className = 'category-grid';

    items.forEach(p=>{
      const div = document.createElement('div');
      div.className = 'category-item';
      const img = document.createElement('img');
      img.src = p.thumbnail || p.photo;
      img.alt = p.title;
      img.loading='lazy';
      div.appendChild(img);
      grid.appendChild(div);
    });

    section.appendChild(grid);
    categoriesContainer.appendChild(section);

    // Add scroll indicator dot
    const dot = document.createElement('div');
    dot.className='dot';
    dot.dataset.index=index;
    dot.addEventListener('click', ()=>{ section.scrollIntoView({behavior:'smooth'}); });
    indicatorContainer.appendChild(dot);
  });

  // Initialize IntersectionObserver for fade-in and indicator
  const categoryItems = document.querySelectorAll('.category-item');
  const observerOptions = { threshold:0.1 };
  categoryItems.forEach(item=>{
    const observer = new IntersectionObserver(entries=>{
      entries.forEach(entry=>{
        if(entry.isIntersecting){
          entry.target.classList.add('visible');
          observer.unobserve(entry.target);
        }
      });
    }, observerOptions);
    observer.observe(item);
  });

  // Scroll listener for parallax & indicator
  const photosContainer = document.getElementById('photos');
  const sections = document.querySelectorAll('.category-section');
  const dots = document.querySelectorAll('#photos .scroll-indicator .dot');

  photosContainer.addEventListener('scroll', ()=>{
    // Parallax effect
    document.querySelectorAll('.category-item img').forEach(img=>{
      const parent = img.parentElement;
      const offset = parent.getBoundingClientRect().top;
      img.style.transform = `translateY(${offset*0.1}px)`; // subtle
    });
    // Update active dot
    sections.forEach((sec,i)=>{
      const rect = sec.getBoundingClientRect();
      if(rect.top <= window.innerHeight/2 && rect.bottom >= window.innerHeight/2){
        dots.forEach(d=>d.classList.remove('active'));
        if(dots[i]) dots[i].classList.add('active');
      }
    });
  });

  // Keyboard navigation
  document.addEventListener('keydown', (e)=>{
    if(['ArrowUp','ArrowDown'].includes(e.key)){
      let currentIndex = 0;
      sections.forEach((sec,i)=>{
        const rect = sec.getBoundingClientRect();
        if(rect.top <= window.innerHeight/2 && rect.bottom >= window.innerHeight/2){
          currentIndex=i;
        }
      });
      if(e.key==='ArrowDown'){
        const nextIndex = Math.min(currentIndex+1,sections.length-1);
        sections[nextIndex].scrollIntoView({behavior:'smooth'});
      } else if(e.key==='ArrowUp'){
        const prevIndex = Math.max(currentIndex-1,0);
        sections[prevIndex].scrollIntoView({behavior:'smooth'});
      }
    }
  });
}

fetchPhotos();
</script>

</body>
</html>
