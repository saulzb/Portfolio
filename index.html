<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Saul Zidulka-Bejcek</title>
<link href="https://fonts.googleapis.com/css2?family=Archivo+Expanded&display=swap" rel="stylesheet">
<style>
html, body {
  margin:0; padding:0;
  width:100%; height:100%;
  overflow:hidden;
  font-family:'Archivo Expanded', sans-serif;
  background:#111;
  color:#eee;
}

#container {
  position:relative;
  width:300vw;  /* left-center-right */
  height:200vh; /* center + down for photos */
  transform: translate(0,0); /* start on hero */
  transition: transform 0.8s ease;
}

section {
  position:absolute;
  width:100vw; height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  text-align:center;
  font-size:1rem;
  box-sizing:border-box;
  flex-direction:column;
}

/* Sections positions */
#hero      { top:0; left:0; background:url('SAULZIDULKA-BEJCEK.png') center/cover no-repeat; }
#music     { top:0; left:100vw; background:#222; }
#drawings  { top:0; left:-100vw; background:#444; }
#photos    { top:100vh; left:0; background:#333; overflow-y:auto; display:flex; flex-direction:column; align-items:center; padding:20px; }

/* Photos: Featured row spans full width */
.featured { width:90%; max-width:800px; margin-bottom:20px; border-radius:8px; display:flex; justify-content:center; align-items:center; font-weight:bold; font-size:1rem; }

/* Section boxes */
.photo-box { background:#555; border-radius:8px; display:flex; justify-content:center; align-items:center; color:#fff; font-size:0.9rem; width:90%; max-width:400px; margin-bottom:10px; height:150px; cursor:pointer; }

h2 { font-size:1rem; margin:20px 0 10px; color:#fff; }

/* Arrows */
.arrow {
  position:absolute;
  color:#fff;
  font-size:1.5rem;
  display:flex;
  flex-direction:column;
  align-items:center;
  cursor:pointer;
  user-select:none;
}
.arrow span { font-size:0.8rem; margin-top:5px; }

/* Hero arrows */
.arrow-right { top:50%; right:20px; transform:translateY(-50%);}
.arrow-left  { top:50%; left:20px; transform:translateY(-50%);}
.arrow-down  { bottom:80px; left:50%; transform:translateX(-50%); } /* pulled up for mobile visibility */

/* Branch arrows */
.arrow-back-left  { top:50%; left:20px; transform:translateY(-50%);} /* Music → Hero */
.arrow-back-right { top:50%; right:20px; transform:translateY(-50%);} /* Drawings → Hero */
.arrow-back-up    { top:20px; left:50%; transform:translateX(-50%);}   /* Photos → Hero */
</style>
</head>
<body>

<div id="container">
  <!-- Hero -->
  <section id="hero">
    <div class="arrow arrow-right" data-dir="right">→<span>Music</span></div>
    <div class="arrow arrow-left" data-dir="left">←<span>Drawings</span></div>
    <div class="arrow arrow-down" data-dir="down">↓<span>Photos</span></div>
  </section>

  <!-- Music -->
  <section id="music">
    <h2>MUSIC</h2>
    <div class="arrow arrow-back-left" data-dir="hero">←<span>Back</span></div>
  </section>

  <!-- Drawings -->
  <section id="drawings">
    <h2>DRAWINGS</h2>
    <div class="arrow arrow-back-right" data-dir="hero">→<span>Back</span></div>
  </section>

  <!-- Photos -->
  <section id="photos">
    <div class="arrow arrow-back-up" data-dir="hero">↑<span>Back</span></div>
  </section>
</div>

<script>
const container = document.getElementById('container');
let currentSection = 'hero';
const sectionsMap = {
  hero:{x:0, y:0},
  right:{x:-100, y:0},   // Music
  left:{x:100, y:0},     // Drawings
  down:{x:0, y:-100}     // Photos
};

function snapTo(section){
  const target = sectionsMap[section];
  if(target){
    container.style.transform = `translate(${target.x}vw, ${target.y}vh)`;
    currentSection = section;
  }
}

// Arrow clicks
document.querySelectorAll('.arrow').forEach(a=>{
  a.addEventListener('click', ()=>snapTo(a.dataset.dir));
});

// Wheel / trackpad scroll
let scrollCooldown=false;
window.addEventListener('wheel', e=>{
  if(scrollCooldown) return;
  scrollCooldown=true;
  const absX = Math.abs(e.deltaX), absY = Math.abs(e.deltaY);
  if(absX>absY){
    if(e.deltaX>0 && currentSection==='hero') snapTo('right');
    if(e.deltaX<0 && currentSection==='hero') snapTo('left');
  } else {
    if(e.deltaY>0 && currentSection==='hero') snapTo('down');
    if(e.deltaY<0 && currentSection==='down') snapTo('hero');
  }
  setTimeout(()=>scrollCooldown=false,800);
});

// Keyboard arrows
window.addEventListener('keydown', e=>{
  if(e.key==='ArrowRight' && currentSection==='hero') snapTo('right');
  if(e.key==='ArrowLeft' && currentSection==='hero') snapTo('left');
  if(e.key==='ArrowDown' && currentSection==='hero') snapTo('down');
  if(e.key==='ArrowUp') snapTo('hero');
});

// Disable natural scroll
window.addEventListener('scroll', e=>e.preventDefault());

// ----------------- Contentful Photos -----------------
const SPACE_ID = "5w319pzc4eiq";       
const ACCESS_TOKEN = "l_S14vNHPLKqDVzZDxMSlO3g3AhMne9mAvyC74dyetg"; 
const ENVIRONMENT = "master";           

async function loadPhotos() {
  const url = `https://cdn.contentful.com/spaces/${SPACE_ID}/environments/${ENVIRONMENT}/entries?access_token=${ACCESS_TOKEN}&content_type=photo&order=fields.title`;

  try {
    const res = await fetch(url);
    const data = await res.json();

    const assets = {};
    data.includes?.Asset?.forEach(a => assets[a.sys.id] = a.fields.file.url);

    const photosSection = document.getElementById('photos');

    // Remove existing boxes
    photosSection.querySelectorAll('.photo-box,h2').forEach(el => el.remove());

    // Featured Photos
    const featuredItems = data.items.filter(item => item.fields.featured === true);
    if (featuredItems.length > 0) {
      const h2 = document.createElement('h2'); h2.textContent='Featured'; photosSection.appendChild(h2);
      featuredItems.forEach(item=>{
        const thumbId = item.fields.doubleExpo1thumbnail?.sys?.id;
        const fullId = item.fields.DoubleExpoPhoto?.sys?.id;
        const thumbUrl = thumbId ? assets[thumbId]+'?w=600':'';
        const fullUrl = fullId ? assets[fullId]+'?w=2000':'';

        const div = document.createElement('div');
        div.className='photo-box'; div.style.background=`url(${thumbUrl}) center/cover no-repeat`; div.style.height='300px';
        div.title=item.fields.title||'';
        div.addEventListener('click',()=>openModal(fullUrl));
        photosSection.appendChild(div);
      });
    }

    // Category Photos
    const categories = ['Wildlife','Double Exposures','Travel','Water','Light'];
    categories.forEach(cat=>{
      const catItems = data.items.filter(item => item.fields.category === cat);
      if(catItems.length===0) return;
      const h2=document.createElement('h2'); h2.textContent=cat; photosSection.appendChild(h2);

      catItems.forEach(item=>{
        const thumbId = item.fields.doubleExpo1thumbnail?.sys?.id;
        const fullId = item.fields.DoubleExpoPhoto?.sys?.id;
        const thumbUrl = thumbId ? assets[thumbId]+'?w=400':'';
        const fullUrl = fullId ? assets[fullId]+'?w=2000':'';

        const div=document.createElement('div');
        div.className='photo-box'; div.style.background=`url(${thumbUrl}) center/cover no-repeat`;
        div.title=item.fields.title||''; div.addEventListener('click',()=>openModal(fullUrl));
        photosSection.appendChild(div);
      });
    });

  } catch (err) {
    console.error("Error loading photos:", err);
  }
}

loadPhotos();

// Modal for full-size images
function openModal(url){
  const modal = document.createElement('div');
  modal.style.position='fixed'; modal.style.top=0; modal.style.left=0; modal.style.width='100vw'; modal.style.height='100vh';
  modal.style.background='rgba(0,0,0,0.9)'; modal.style.display='flex'; modal.style.justifyContent='center';
  modal.style.alignItems='center'; modal.style.cursor='pointer'; modal.style.zIndex=1000;

  const img=document.createElement('img'); img.src=url; img.style.maxWidth='90%'; img.style.maxHeight='90%';
  modal.appendChild(img); modal.addEventListener('click',()=>modal.remove());
  document.body.appendChild(modal);
}
</script>

</body>
</html>
