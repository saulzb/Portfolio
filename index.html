<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Saul Zidulka-Bejcek</title>
<link href="https://fonts.googleapis.com/css2?family=Archivo+Expanded&display=swap" rel="stylesheet">
<style>
html, body {
  margin:0; padding:0;
  width:100%; height:100%;
  font-family:'Archivo Expanded', sans-serif;
  background:#111;
  color:#eee;
  overflow-x:hidden;
  scroll-behavior: smooth;
}

/* Horizontal hero container */
#container {
  width: 100vw;
  height: 100vh;
}

section.horizontal {
  width:100vw;
  height:100vh;
  display:flex;
  flex-direction:column;
  padding:20px;
  box-sizing:border-box;
  position:relative;
}

#hero { background:url('SAULZIDULKA-BEJCEK.png') center/cover no-repeat; }

/* Vertical photos section */
#photos {
  background:#111;
  min-height:100vh;
  overflow-y:auto;
  scroll-snap-type: y mandatory;
  scroll-behavior: smooth;
  padding:60px 20px 20px 20px;
  box-sizing:border-box;
  position: relative;
}

.category-section {
  margin-bottom:40px;
  scroll-snap-align: start;
}

/* Arrows styling */
.arrow {
  color:#fff;
  font-size:1.5rem;
  display:flex;
  flex-direction:column;
  align-items:center;
  cursor:pointer;
  user-select:none;
  z-index:10;
  position:absolute;
}
.arrow span { font-size:0.8rem; margin-top:5px; }

.arrow-down { bottom:40px; left:50%; transform:translateX(-50%);} 
.arrow-back-up { top:20px; left:50%; transform:translateX(-50%);} 

@media(max-width:768px){
  #hero { background:url('SAULZIDLKABEJCEKMOBILE.jpg') center/cover no-repeat; background-size:cover; }
  .arrow-down { bottom:20px; }
  .category-grid { grid-template-columns: repeat(auto-fit, minmax(140px,1fr)); }
  .category-item img { max-height: 150px; }
}

/* Photos grid */
.category-grid { display:grid; grid-template-columns: repeat(auto-fill,minmax(150px,1fr)); gap:10px; }
.category-item img { width:100%; display:block; border-radius:5px; }
</style>
</head>
<body>

<!-- Hero -->
<div id="container">
  <section id="hero" class="horizontal">
    <div class="arrow arrow-down">↓<span>Photos</span></div>
  </section>
</div>

<!-- Photos section -->
<section id="photos">
  <div class="arrow arrow-back-up">↑<span>Back</span></div>
  <div id="categories"></div>
</section>

<script>
const hero = document.getElementById('hero');
const photos = document.getElementById('photos');
const categories = document.getElementById('categories');

// Hero arrow to photos
hero.querySelector('.arrow-down').onclick = () => photos.scrollIntoView({behavior:'smooth'});

// Back arrow to hero
document.querySelector('.arrow-back-up').onclick = () => hero.scrollIntoView({behavior:'smooth'});

// ---------- CONTENTFUL LOAD ----------
const SPACE_ID = '5w319pzc4eiq';
const ACCESS_TOKEN = 'l_S14vNHPLKqDVzZDxMSlO3g3AhMne9mAvyC74dyetg';
const ENVIRONMENT = 'master';

async function fetchPhotos(){
  const url = `https://cdn.contentful.com/spaces/${SPACE_ID}/environments/${ENVIRONMENT}/entries?content_type=photo&access_token=${ACCESS_TOKEN}&order=sys.createdAt&include=1`;
  const res = await fetch(url);
  if(!res.ok){ console.error('Contentful fetch failed', res.status); return; }
  const data = await res.json();
  const assets = {};
  data.includes?.Asset?.forEach(a => assets[a.sys.id] = a.fields.file.url);
  const photosData = data.items.map(item=>{
    const f = item.fields;
    return {
      title: f.title,
      photo: f.photo ? `https:${assets[f.photo.sys.id]}` : '',
      thumbnail: f.thumbnail ? `https:${assets[f.thumbnail.sys.id]}` : '',
      category: f.category || '',
      featured: f.featured || false
    };
  });
  displayPhotos(photosData);
}

function displayPhotos(photosData){
  const allCategories = ["Featured","Double Exposures","Wildlife","Travel","Water","Light"];
  allCategories.forEach(cat=>{
    const items = (cat==="Featured") ? photosData.filter(p=>p.featured) : photosData.filter(p=>p.category===cat);
    if(items.length===0) return;
    const section = document.createElement('div'); section.className='category-section';
    const h2 = document.createElement('h2'); h2.textContent = cat; section.appendChild(h2);
    const grid = document.createElement('div'); grid.className = 'category-grid';
    items.forEach(p=>{
      const div = document.createElement('div'); div.className = 'category-item';
      const img = document.createElement('img'); img.src = p.thumbnail || p.photo; img.alt = p.title;
      div.appendChild(img); grid.appendChild(div);
    });
    section.appendChild(grid);
    categories.appendChild(section);
  });
}

fetchPhotos();

// ---------- SCROLL SNAP FROM HERO TO PHOTOS ----------
let heroScrolled = false;

window.addEventListener('wheel', e => {
  if(heroScrolled) return; // only trigger once
  if(e.deltaY > 0){
    const heroRect = hero.getBoundingClientRect();
    if(heroRect.bottom > window.innerHeight/2){
      heroScrolled = true;
      photos.scrollIntoView({behavior:'smooth'});
      e.preventDefault();
    }
  }
}, {passive:false});

// Optional: allow mousewheel on photos to snap between categories
let isScrolling = false;
function snapToCategory(delta){
  const categorySections = Array.from(document.querySelectorAll('.category-section'));
  const currentScroll = photos.scrollTop;
  let target = null;
  if(delta > 0){
    for(let sec of categorySections){
      if(sec.offsetTop > currentScroll + 10){
        target = sec; break;
      }
    }
  } else {
    for(let i = categorySections.length-1; i>=0; i--){
      if(categorySections[i].offsetTop < currentScroll - 10){
        target = categorySections[i]; break;
      }
    }
  }
  if(target){
    isScrolling = true;
    photos.scrollTo({top: target.offsetTop, behavior:'smooth'});
    setTimeout(()=>{isScrolling=false;}, 400);
  }
}

photos.addEventListener('wheel', e => {
  if(!heroScrolled) return; // don't interfere with initial hero scroll
  if(isScrolling) return;
  snapToCategory(e.deltaY);
  e.preventDefault();
}, {passive:false});
</script>
</body>
</html>
