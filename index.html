<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Saul</title>

  <style>
    body {
      margin: 0;
      padding: 0;
      background: #000;
      color: #fff;
      font-family: Arial, sans-serif;
      overflow-x: hidden;
    }

    h2 {
      margin: 60px 0 20px 20px;
      font-size: 32px;
      letter-spacing: 1px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 20px;
      padding: 20px;
    }

    .grid img {
      width: 100%;
      height: auto;
      border-radius: 4px;
      cursor: pointer;
      transition: opacity 0.2s ease;
    }

    .grid img:hover {
      opacity: 0.8;
    }

    /* Featured Scroll Rows */
    .scroll-row {
      white-space: nowrap;
      overflow: hidden;
      display: flex;
      gap: 20px;
      padding: 20px;
    }

    .scroll-row img {
      height: 220px;
      border-radius: 4px;
      flex-shrink: 0;
    }

    /* Lightbox Overlay */
    #lightbox {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0,0,0,0.92);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }

    #lightbox img {
      max-width: 90%;
      max-height: 90%;
      border-radius: 6px;
      box-shadow: 0 0 30px rgba(0,0,0,0.7);
    }

    /* Lightbox Arrows */
    .arrow {
      position: fixed;
      top: 50%;
      transform: translateY(-50%);
      font-size: 48px;
      cursor: pointer;
      user-select: none;
      padding: 20px;
      color: white;
      z-index: 1000;
    }

    #arrow-left {
      left: 20px;
    }

    #arrow-right {
      right: 20px;
    }

    /* Close X */
    #close-lightbox {
      position: fixed;
      top: 20px;
      right: 30px;
      font-size: 42px;
      cursor: pointer;
      user-select: none;
      z-index: 1001;
    }
  </style>
</head>

<body>
  <h2>Featured</h2>
  <div id="featuredRow" class="scroll-row"></div>

  <h2>Favourites</h2>
  <div id="favourites" class="grid"></div>

  <h2>People</h2>
  <div id="people" class="grid"></div>

  <h2>Nature</h2>
  <div id="nature" class="grid"></div>

  <!-- LIGHTBOX -->
  <div id="lightbox">
    <span id="close-lightbox">×</span>
    <span id="arrow-left" class="arrow">❮</span>
    <img id="lightbox-img" src="" />
    <span id="arrow-right" class="arrow">❯</span>
  </div>

  <script>
    const SPACE_ID = "YOUR_SPACE_ID";
    const ACCESS_TOKEN = "YOUR_ACCESS_TOKEN";

    async function loadPhotos() {
      const res = await fetch(
        `https://cdn.contentful.com/spaces/${SPACE_ID}/entries?access_token=${ACCESS_TOKEN}&content_type=photo`
      );
      const data = await res.json();

      // Build asset map
      const assets = {};
      data.includes.Asset.forEach(asset => {
        assets[asset.sys.id] = "https:" + asset.fields.file.url;
      });

      const photos = data.items.map(p => ({
        title: p.fields.title,
        thumbnail: assets[p.fields.thumbnail.sys.id],
        photo: assets[p.fields.photo.sys.id],
        gallery: p.fields.gallery
      }));

      renderPhotos(photos);
    }

    function renderPhotos(photos) {
      const featured = document.getElementById("featuredRow");
      const favourites = document.getElementById("favourites");
      const people = document.getElementById("people");
      const nature = document.getElementById("nature");

      const categories = { favourites, people, nature };

      photos.forEach(photo => {
        const img = document.createElement("img");
        img.src = photo.thumbnail;

        if (photo.gallery === "featured") {
          featured.appendChild(img.cloneNode());
          featured.appendChild(img.cloneNode());
        } else {
          img.addEventListener("click", () =>
            openLightbox(photo.gallery, photo.photo)
          );
          categories[photo.gallery].appendChild(img);
        }
      });
    }

    /* ----------------- LIGHTBOX LOGIC ------------------ */
    let currentGallery = [];
    let currentIndex = 0;

    function openLightbox(gallery, startPhoto) {
      const all = [...document.querySelectorAll(`#${gallery} img`)];
      currentGallery = all.map((img, i) => ({
        index: i,
        full: img.src.replace("thumbnail", "photo")
      }));

      currentIndex = currentGallery.findIndex(
        p => p.full === startPhoto.replace("thumbnail", "photo")
      );

      showLightboxPhoto();
      document.getElementById("lightbox").style.display = "flex";
    }

    function showLightboxPhoto() {
      const img = document.getElementById("lightbox-img");
      img.src = currentGallery[currentIndex].full;
    }

    function nextPhoto() {
      currentIndex = (currentIndex + 1) % currentGallery.length;
      showLightboxPhoto();
    }

    function prevPhoto() {
      currentIndex =
        (currentIndex - 1 + currentGallery.length) % currentGallery.length;
      showLightboxPhoto();
    }

    /* BUTTON CONTROLS */
    document.getElementById("arrow-right").onclick = nextPhoto;
    document.getElementById("arrow-left").onclick = prevPhoto;
    document.getElementById("close-lightbox").onclick = () =>
      (document.getElementById("lightbox").style.display = "none");

    /* KEYBOARD CONTROLS */
    document.addEventListener("keydown", e => {
      if (document.getElementById("lightbox").style.display === "flex") {
        if (e.key === "ArrowRight") nextPhoto();
        if (e.key === "ArrowLeft") prevPhoto();
        if (e.key === "Escape")
          document.getElementById("lightbox").style.display = "none";
      }
    });

    loadPhotos();
  </script>
</body>
</html>
