<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Saul Zidulka-Bejcek</title>
<link href="https://fonts.googleapis.com/css2?family=Archivo+Expanded&display=swap" rel="stylesheet">
<style>
html, body {
  margin:0; padding:0;
  width:100%; height:100%;
  font-family:'Archivo Expanded', sans-serif;
  background:#111;
  color:#eee;
}

#container {
  position:relative;
  width:300vw; /* left-center-right */
  height:auto;
  transform: translate(0,0);
  transition: transform 0.8s ease;
}

section {
  position:absolute;
  width:100vw;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  text-align:center;
  font-size:1rem;
  box-sizing:border-box;
  flex-direction:column;
  overflow:visible;
  padding:20px;
}

/* Sections positions */
#hero {
  top:0; left:0;
  height:100vh;
  background:url('SAULZIDULKA-BEJCEK.png') center/cover no-repeat;
}
#music     { top:0; left:100vw; height:100vh; background:#222; }
#drawings  { top:0; left:-100vw; height:100vh; background:#444; }
#photos {
  top:100vh; left:0;
  background:#111;
  padding:20px;
  box-sizing:border-box;
  min-height:100vh;
  overflow-y:auto; /* vertical scroll */
}

/* Featured grid */
#featured {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  grid-gap:15px;
  margin-bottom:30px;
}
.featured-item {
  border-radius:8px;
  overflow:hidden;
}
.featured-item img {
  width:100%;
  height:auto;
  object-fit:contain; 
  display:block;
  background:none;
  max-height:250px; /* smaller images */
}

/* Category sections */
.category-section {
  margin-bottom:40px;
  width:100%;
}
.category-section h2 {
  font-size:1rem;
  margin-bottom:15px;
  text-align:left;
  padding-left:5px;
}
.category-grid {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
  grid-gap:10px;
}
.category-item {
  border-radius:8px;
  overflow:hidden;
}
.category-item img {
  width:100%;
  height:auto;
  object-fit:contain;
  display:block;
  background:none;
  max-height:200px; 
}

/* Arrows */
.arrow {
  position:absolute;
  color:#fff;
  font-size:1.5rem;
  display:flex;
  flex-direction:column;
  align-items:center;
  cursor:pointer;
  user-select:none;
  z-index:10;
}
.arrow span { font-size:0.8rem; margin-top:5px; }

/* Hero arrows */
.arrow-right { top:50%; right:20px; transform:translateY(-50%);}
.arrow-left  { top:50%; left:20px; transform:translateY(-50%);}
.arrow-down  { bottom:40px; left:50%; transform:translateX(-50%);}

/* Branch arrows */
.arrow-back-left  { top:50%; left:20px; transform:translateY(-50%);} 
.arrow-back-right { top:50%; right:20px; transform:translateY(-50%);} 
.arrow-back-up    { top:20px; left:50%; transform:translateX(-50%);}   

/* Mobile adjustments */
@media(max-width:768px){
  #hero { background:url('SAULZIDULKABEJCEKMOBILE.jpg') center/cover no-repeat; background-size:cover; }
  .arrow-down { bottom:20px; }
  #featured { grid-template-columns:repeat(auto-fit,minmax(150px,1fr)); }
  .category-grid { grid-template-columns:repeat(auto-fit,minmax(140px,1fr)); }
  .featured-item img, .category-item img { max-height:150px; }
}
</style>
</head>
<body>

<div id="container">
  <!-- Hero -->
  <section id="hero">
    <div class="arrow arrow-right" data-dir="right">→<span>Music</span></div>
    <div class="arrow arrow-left" data-dir="left">←<span>Drawings</span></div>
    <div class="arrow arrow-down" data-dir="down">↓<span>Photos</span></div>
  </section>

  <!-- Music -->
  <section id="music">
    <h2>MUSIC</h2>
    <div class="arrow arrow-back-left" data-dir="hero">←<span>Back</span></div>
  </section>

  <!-- Drawings -->
  <section id="drawings">
    <h2>DRAWINGS</h2>
    <div class="arrow arrow-back-right" data-dir="hero">→<span>Back</span></div>
  </section>

  <!-- Photos -->
  <section id="photos">
    <div class="arrow arrow-back-up" data-dir="hero">↑<span>Back</span></div>
    <div id="featured"></div>
    <div id="categories"></div>
  </section>
</div>

<script>
// ---- ARROWS + SCROLLING ----
const container = document.getElementById('container');
let currentSection = 'hero';
let firstScrollLock = false; // for locking between hero and photos
const sectionsMap = {
  hero:{x:0, y:0},
  right:{x:-100, y:0},   
  left:{x:100, y:0},     
  down:{x:0, y:-100}     
};

function snapTo(section){
  const target = sectionsMap[section];
  if(target){
    container.style.transform = `translate(${target.x}vw, ${target.y}vh)`;
    currentSection = section;
    firstScrollLock = false; // reset scroll lock
  }
}

document.querySelectorAll('.arrow').forEach(a=>{
  a.addEventListener('click', ()=>snapTo(a.dataset.dir));
});

// Wheel scroll with locking logic
window.addEventListener('wheel', e=>{
  const photosSection = document.getElementById('photos');
  if(currentSection === 'hero'){
    if(e.deltaY > 0){
      snapTo('down'); // first scroll down locks at top of photos
      e.preventDefault();
    }
  } else if(currentSection === 'down'){
    // horizontal scroll ignored
    // vertical scroll inside photos
    if(e.deltaY < 0){
      if(photosSection.scrollTop === 0){
        if(!firstScrollLock){
          firstScrollLock = true; // lock at top
          e.preventDefault();
        } else {
          snapTo('hero'); // second scroll returns to hero
        }
      }
    }
  }
});

// Keyboard arrows
window.addEventListener('keydown', e=>{
  if(e.key==='ArrowRight' && currentSection==='hero') snapTo('right');
  if(e.key==='ArrowLeft' && currentSection==='hero') snapTo('left');
  if(e.key==='ArrowDown' && currentSection==='hero') snapTo('down');
  if(e.key==='ArrowUp') snapTo('hero');
});
window.addEventListener('scroll', e=>e.preventDefault());

// ---- CONTENTFUL DYNAMIC LOAD ----
const SPACE_ID = 'YOUR_SPACE_ID';
const ACCESS_TOKEN = 'YOUR_CDA_TOKEN';
const ENVIRONMENT = 'master';

async function fetchPhotos() {
  const url = `https://cdn.contentful.com/spaces/${SPACE_ID}/environments/${ENVIRONMENT}/entries?content_type=photo&access_token=${ACCESS_TOKEN}&order=sys.createdAt&include=1`;
  const res = await fetch(url);
  if(!res.ok) { console.error('Contentful fetch failed', res.status); return; }
  const data = await res.json();

  const assets = {};
  data.includes?.Asset?.forEach(a=>{
    assets[a.sys.id] = a.fields.file.url;
  });

  const photos = data.items.map(item => {
    const fields = item.fields;
    return {
      title: fields.title,
      photo: fields.photo ? `https:${assets[fields.photo.sys.id]}` : '',
      thumbnail: fields.thumbnail ? `https:${assets[fields.thumbnail.sys.id]}` : '',
      description: fields.description || '',
      category: fields.category || '',
      featured: fields.featured || false
    };
  });

  displayPhotos(photos);
}

function displayPhotos(photos){
  const featuredContainer = document.getElementById('featured');
  const categoriesContainer = document.getElementById('categories');

  // Featured
  const featuredPhotos = photos.filter(p=>p.featured);
  featuredPhotos.forEach(p=>{
    const div = document.createElement('div');
    div.className = 'featured-item';
    const img = document.createElement('img');
    img.src = p.photo;
    img.alt = p.title;
    img.loading = 'lazy';
    div.appendChild(img);
    featuredContainer.appendChild(div);
  });

  // Categories
  const allCategories = ["Wildlife", "Double Exposures", "Travel", "Water", "Light"];
  allCategories.forEach(cat => {
    const items = photos.filter(p => p.category === cat && !p.featured);
    if(items.length === 0) return; // skip empty
    const section = document.createElement('div');
    section.className = 'category-section';
    const h2 = document.createElement('h2');
    h2.textContent = cat;
    section.appendChild(h2);

    const grid = document.createElement('div');
    grid.className = 'category-grid';
    items.forEach(p=>{
      const div = document.createElement('div');
      div.className = 'category-item';
      const img = document.createElement('img');
      img.src = p.thumbnail || p.photo;
      img.alt = p.title;
      img.loading = 'lazy';
      div.appendChild(img);
      grid.appendChild(div);
    });

    section.appendChild(grid);
    categoriesContainer.appendChild(section);
  });
}

fetchPhotos();
</script>

</body>
</html>
