<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Saul Zidulka-Bejcek</title>
<link href="https://fonts.googleapis.com/css2?family=Archivo+Expanded&display=swap" rel="stylesheet">
<style>
html, body {
  margin:0; padding:0;
  width:100%; height:100%;
  overflow:hidden;
  font-family:'Archivo Expanded', sans-serif;
  background:#111;
  color:#eee;
}

#container {
  position:relative;
  width:300vw;  /* left-center-right */
  height:200vh; /* center + down for photos */
  transform: translate(0,0); /* start on hero */
  transition: transform 0.8s ease;
}

section {
  position:absolute;
  width:100vw; height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  text-align:center;
  font-size:1rem;
  box-sizing:border-box;
  flex-direction:column;
}

/* Sections positions */
#hero      { top:0; left:0; background:url('SAULZIDULKA-BEJCEK.png') center/cover no-repeat; }
#music     { top:0; left:100vw; background:#222; }
#drawings  { top:0; left:-100vw; background:#444; }
#photos    { top:100vh; left:0; background:#333; display:grid; grid-template-columns:repeat(auto-fill,minmax(200px,1fr)); grid-auto-rows:minmax(150px,auto); grid-gap:10px; padding:20px; }

/* Section boxes */
.photo-box { background:#555; border-radius:8px; display:flex; justify-content:center; align-items:center; color:#fff; font-size:0.9rem; cursor:pointer; }
h2 { font-size:0.8rem; margin-bottom:10px; }

/* Arrows */
.arrow {
  position:absolute;
  color:#fff;
  font-size:1.5rem;
  display:flex;
  flex-direction:column;
  align-items:center;
  cursor:pointer;
  user-select:none;
}
.arrow span { font-size:0.8rem; margin-top:5px; }

/* Hero arrows */
.arrow-right { top:50%; right:20px; transform:translateY(-50%);}
.arrow-left  { top:50%; left:20px; transform:translateY(-50%);}
.arrow-down  { bottom:50px; left:50%; transform:translateX(-50%);} /* moved up for mobile */

/* Branch arrows */
.arrow-back-left  { top:50%; left:20px; transform:translateY(-50%);}
.arrow-back-right { top:50%; right:20px; transform:translateY(-50%);}
.arrow-back-up    { top:20px; left:50%; transform:translateX(-50%);}  

/* Modal styles */
#photo-modal {
  position:fixed; inset:0; background:rgba(0,0,0,0.9);
  display:flex; align-items:center; justify-content:center;
  cursor:pointer; z-index:9999; display:none;
}
#photo-modal img {
  max-width:90vw; max-height:90vh; object-fit:contain;
}
</style>
</head>
<body>

<div id="container">
  <!-- Hero -->
  <section id="hero">
    <div class="arrow arrow-right" data-dir="right">→<span>Music</span></div>
    <div class="arrow arrow-left" data-dir="left">←<span>Drawings</span></div>
    <div class="arrow arrow-down" data-dir="down">↓<span>Photos</span></div>
  </section>

  <!-- Music -->
  <section id="music">
    <h2>MUSIC</h2>
    <div class="arrow arrow-back-left" data-dir="hero">←<span>Back</span></div>
  </section>

  <!-- Drawings -->
  <section id="drawings">
    <h2>DRAWINGS</h2>
    <div class="arrow arrow-back-right" data-dir="hero">→<span>Back</span></div>
  </section>

  <!-- Photos -->
  <section id="photos">
    <h2>PHOTOS</h2>
    <div class="arrow arrow-back-up" data-dir="hero">↑<span>Back</span></div>
    <!-- Featured + categories will populate here dynamically -->
  </section>
</div>

<div id="photo-modal">
  <img id="modal-img" src="" alt="Full photo">
</div>

<section id="photos">
  <div class="arrow arrow-back-up" data-dir="hero">↑<span>Back</span></div>
</section>

<script>
const SPACE_ID = "5w319pzc4eiq";       // Replace with your Contentful Space ID
const ACCESS_TOKEN = "l_S14vNHPLKqDVzZDxMSlO3g3AhMne9mAvyC74dyetg"; // Replace with your Delivery API token
const ENVIRONMENT = "master";           // Usually "master" unless you use a different environment

async function loadPhotos() {
  const url = `https://cdn.contentful.com/spaces/${SPACE_ID}/environments/${ENVIRONMENT}/entries?access_token=${ACCESS_TOKEN}&content_type=photo&order=fields.title`;

  try {
    const res = await fetch(url);
    const data = await res.json();

    const assets = {};
    data.includes?.Asset?.forEach(a => assets[a.sys.id] = a.fields.file.url);

    const photosSection = document.getElementById('photos');

    // Remove existing photo boxes (in case reloading)
    photosSection.querySelectorAll('.photo-box,h2').forEach(el => el.remove());

    // ----- Featured Photos -----
    const featuredItems = data.items.filter(item => item.fields.featured === true);
    if (featuredItems.length > 0) {
      const h2 = document.createElement('h2');
      h2.textContent = 'Featured';
      photosSection.appendChild(h2);

      featuredItems.forEach(item => {
        const thumbId = item.fields.doubleExpo1thumbnail?.sys?.id;
        const fullId = item.fields.DoubleExpoPhoto?.sys?.id;
        const thumbUrl = thumbId ? assets[thumbId] + '?w=600' : '';
        const fullUrl = fullId ? assets[fullId] + '?w=2000' : '';

        const div = document.createElement('div');
        div.className = 'photo-box';
        div.style.background = `url(${thumbUrl}) center/cover no-repeat`;
        div.style.height = '300px';
        div.title = item.fields.title || '';
        div.addEventListener('click', () => openModal(fullUrl));

        photosSection.appendChild(div);
      });
    }

    // ----- Categories -----
    const categories = ['Wildlife', 'Double Exposures', 'Travel', 'Water', 'Light'];
    categories.forEach(cat => {
      const catItems = data.items.filter(item => item.fields.category === cat);
      if (catItems.length === 0) return;

      const h2 = document.createElement('h2');
      h2.textContent = cat;
      photosSection.appendChild(h2);

      catItems.forEach(item => {
        const thumbId = item.fields.doubleExpo1thumbnail?.sys?.id;
        const fullId = item.fields.DoubleExpoPhoto?.sys?.id;
        const thumbUrl = thumbId ? assets[thumbId] + '?w=400' : '';
        const fullUrl = fullId ? assets[fullId] + '?w=2000' : '';

        const div = document.createElement('div');
        div.className = 'photo-box';
        div.style.background = `url(${thumbUrl}) center/cover no-repeat`;
        div.style.height = '150px';
        div.title = item.fields.title || '';
        div.addEventListener('click', () => openModal(fullUrl));

        photosSection.appendChild(div);
      });
    });

  } catch (err) {
    console.error("Error loading photos:", err);
  }
}

// Call the function to load photos
loadPhotos();

// Optional: Modal function for full images
function openModal(url) {
  const modal = document.createElement('div');
  modal.style.position = 'fixed';
  modal.style.top = 0;
  modal.style.left = 0;
  modal.style.width = '100vw';
  modal.style.height = '100vh';
  modal.style.background = 'rgba(0,0,0,0.9)';
  modal.style.display = 'flex';
  modal.style.justifyContent = 'center';
  modal.style.alignItems = 'center';
  modal.style.cursor = 'pointer';
  modal.style.zIndex = 1000;

  const img = document.createElement('img');
  img.src = url;
  img.style.maxWidth = '90%';
  img.style.maxHeight = '90%';
  modal.appendChild(img);

  modal.addEventListener('click', () => modal.remove());
  document.body.appendChild(modal);
}
</script>

</body>
</html>
